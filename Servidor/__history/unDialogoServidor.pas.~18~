unit unDialogoServidor;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, ExtCtrls;

type
  TfmServer = class(TForm)
    Label1: TLabel;
    Label2: TLabel;
    Label3: TLabel;
    moUsuarios: TMemo;
    Label4: TLabel;
    Timer1: TTimer;
    procedure FormCreate(Sender: TObject);
    procedure Timer1Timer(Sender: TObject);
    procedure FormShow(Sender: TObject);
  private
    PConn: Integer;
  public
    procedure CriarConexao;
    procedure FechaConexao;
    procedure Inserir(AUsuario : String);
    procedure Remover(AUsuario : String);
  end;

var
  fmServer: TfmServer;

implementation

{$R *.dfm}

{ TfmServer }

procedure TfmServer.CriarConexao;
begin
  Inc(PConn);
end;

procedure TfmServer.FechaConexao;
begin
  Dec(PConn);
end;

procedure TfmServer.FormCreate(Sender: TObject);
begin
  PConn := 0;
  moUsuarios.Lines.Clear;
end;

procedure TfmServer.FormShow(Sender: TObject);
begin
  Application.Minimize;
end;

procedure TfmServer.Inserir(AUsuario: String);
begin
  fmServer.moUsuarios.Lines.Add(AUsuario);
end;

procedure TfmServer.Remover(AUsuario: String);
begin
  moUsuarios.Lines.Delete(moUsuarios.Lines.IndexOf(AUsuario));
end;

procedure TfmServer.Timer1Timer(Sender: TObject);
begin
  Label3.Caption := FormatFloat('00', PConn);
end;

end.


